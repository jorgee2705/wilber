"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,n=Array(e.length);r<e.length;r++)n[r]=e[r];return n}return Array.from(e)}!function(){function e(){if(!a){var e=JSON.parse(localStorage.getItem("swatch_king_error_logs"))||[];if(e.length){a=!0;var n={DeliveryStreamName:"ShopifyFrontEndErrorStream",Records:e.map(function(e){return{Data:r(e)}})};fetch(o,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"bYbP2fniEQ1A11izxnUkQ6T54ho1UwaTJubRhs70"},body:JSON.stringify(n)}).then(function(){localStorage.removeItem("swatch_king_error_logs")})["catch"](function(e){console.warn("Error sending metrics:",e)})["finally"](function(){a=!1})}}}function r(e){var r=JSON.stringify(e),n=(new TextEncoder).encode(r);return btoa(String.fromCharCode.apply(String,_toConsumableArray(n)))}function n(e,r){var n=JSON.parse(localStorage.getItem("swatch_king_error_logs"))||[],t=new Set(n.map(function(e){return e.message})),o=e.srcElement&&e.srcElement.Shopify?e.srcElement.Shopify.shop:"Unknown store",a={type:r,message:e.message||"Unknown error",filename:e.filename||"Unknown source",error_details:JSON.stringify({line:e.lineno||0,column:e.colno||0,stack:e.error?e.error.stack.toString():"No error object"}),store_domain:o,theme_id:window.Shopify.theme.id,created_at:(new Date).toISOString(),useragent:navigator.userAgent},i=JSON.parse(a.error_details);!t.has(a.message)&&"No error object"!==i.stack&&a.filename.includes("variant-swatch-king-")&&n.push(a),n.length>50&&n.shift(),localStorage.setItem("swatch_king_error_logs",JSON.stringify(n))}function t(){window.addEventListener("error",function(e){n(e,"error")}),window.addEventListener("unhandledrejection",function(e){n(e,"unhandledrejection")}),window.addEventListener("beforeunload",function(){e()}),window.addEventListener("load",e)}var o="https://a8wyfqi2r2.execute-api.us-east-1.amazonaws.com/prod/errors",a=!1;t(),setInterval(e,5e3)}();