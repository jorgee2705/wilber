customElements.get("collection-item-slider")||customElements.define("collection-item-slider",class extends HTMLElement{constructor(){super()}connectedCallback(){if(this.enableSliderDesktop=this.dataset.enableSliderDesktop==="true",this.enableSliderMobile=this.dataset.enableSliderMobile==="true",!this.enableSliderDesktop&&!this.enableSliderMobile)return;this.selectors={productsWrap:".collection-item-slider__products-wrap",products:".collection-item-slider__products"},this.classes={grid:"f-grid",swiper:"swiper",swiperWrapper:"swiper-wrapper"},this.productsWrap=this.querySelector(this.selectors.productsWrap),this.products=this.querySelector(this.selectors.products),this.sliderInstance=!1;const mql=window.matchMedia(FoxTheme.config.mediaQueryMobile);mql.onchange=this.init.bind(this),this.init()}init(){FoxTheme.config.mqlMobile?this.enableSliderMobile?this.initSlider():this.destroySlider():this.enableSliderDesktop?this.initSlider():this.destroySlider()}initSlider(){if(typeof this.sliderInstance=="object")return;const items=parseInt(this.dataset.items),itemsMobile=parseInt(this.dataset.itemsMobile),columnGap=window.getComputedStyle(this.products).getPropertyValue("--column-gap"),columnGapMobile=window.getComputedStyle(this.products).getPropertyValue("--column-gap-mobile"),spaceBetween=parseFloat(columnGap.replace("rem",""))*10,spaceBetweenMobile=parseFloat(columnGapMobile.replace("rem",""))*10;this.sliderOptions={slidesPerView:itemsMobile,spaceBetween:spaceBetweenMobile,breakpoints:{768:{slidesPerView:items,spaceBetween}},navigation:{nextEl:this.querySelector(".swiper-button-next"),prevEl:this.querySelector(".swiper-button-prev")},pagination:{el:this.querySelector(".swiper-pagination"),clickable:!0,type:"fraction"},loop:!0,threshold:2,grabCursor:!0,allowTouchMove:!0},this.productsWrap.classList.add(this.classes.swiper),this.products.classList.remove(this.classes.grid),this.products.classList.add(this.classes.swiperWrapper),this.sliderInstance=new window.FoxTheme.Carousel(this.productsWrap,this.sliderOptions),this.sliderInstance.init(),this.handleAccessibility(),this.fixQuickviewDuplicate()}handleAccessibility(){FoxTheme.a11y.getFocusableElements(this).forEach(element=>{element.addEventListener("focusin",event=>{if(event.relatedTarget!==null){if(element.closest(".swiper-slide")){const slide=element.closest(".swiper-slide");this.sliderInstance.slider.slideTo(this.sliderInstance.slider.slides.indexOf(slide))}}else element.blur()})})}destroySlider(){this.productsWrap.classList.remove(this.classes.swiper),this.products.classList.remove(this.classes.swiperWrapper),this.products.classList.add(this.classes.grid),typeof this.sliderInstance=="object"&&(this.sliderInstance.slider.destroy(),this.sliderInstance=!1)}fixQuickviewDuplicate(){let modalIds=[];Array.from(this.querySelectorAll("quick-view-modal")).forEach(modal=>{const modalID=modal.getAttribute("id");modalIds.includes(modalID)?modal.remove():modalIds.push(modalID)})}});
//# sourceMappingURL=/cdn/shop/t/6/assets/collection-item-slider.js.map?v=41142367419132842111734371865
